machine:
  node:
    version: 8.9.0
  environment:
    ETA_AUTH_PROVIDER: local
    ETA_DB_PROVIDER: postgres
    ETA_DB_HOST: localhost
    ETA_DB_PORT: 5432
    ETA_DB_USERNAME: ubuntu
    ETA_DB_DATABASE: circle_test
compile:
  override:
    - npm run eta -- generate:indexes
    - npm run eta -- compile:server
test:
  override:
    - mocha --recursive --reporter mocha-junit-reporter:
        environment:
          MOCHA_FILE: $CIRCLE_TEST_REPORTS/junit/test-results.xml
